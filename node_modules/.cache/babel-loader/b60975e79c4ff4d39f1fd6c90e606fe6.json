{"remainingRequest":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/babel-loader/lib/index.js!/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/src/components/uploadBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/src/components/uploadBox.vue","mtime":1630516971026},{"path":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/cache-loader/dist/cjs.js","mtime":1623779648463},{"path":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/babel-loader/lib/index.js","mtime":1623779648459},{"path":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/cache-loader/dist/cjs.js","mtime":1623779648463},{"path":"/Users/gustavoeinstein/Sites/bull-vimeo/bull-vimeo-front/node_modules/vue-loader/lib/index.js","mtime":1623779657212}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlYWR5OiBmYWxzZSwKICAgICAgdmVyaWZpY2F0aW9uOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYm94VG9vZ2xlOiBmdW5jdGlvbiBib3hUb29nbGUoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJmZXRjaHVwbG9hZEJveENvbnRvbGxlciIsIGZhbHNlKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNsZWFyVmlkZW8iKTsKICAgIH0sCiAgICBjaGVja1N0YXR1czogZnVuY3Rpb24gY2hlY2tTdGF0dXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdmlkZW9MZW5ndGggPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldHZpZGVvTmFtZS5sZW5ndGg7CiAgICAgIHZhciByZWFkeSA9IDA7CiAgICAgIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0dmlkZW9OYW1lLmZvckVhY2goZnVuY3Rpb24gKHZpZGVvLCBpbmRleCkgewogICAgICAgIGNvbnNvbGUubG9nKCJ2aWRlbyIsIHZpZGVvKTsKCiAgICAgICAgaWYgKHZpZGVvLnZpZGVvU3RhdHVzID09ICJ1cGxvYWRpbmciKSB7CiAgICAgICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDoyMDA2L3ZpZGVvLXZpbWVvLXN0YXR1cyIsIHsKICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICB2aWRlb25hbWU6IHZpZGVvLnZpZGVvTmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZygiUmVzcG9uc2U6IiwgcmVzKTsKCiAgICAgICAgICAgIGlmIChyZXMubWVzc2FnZSA9PSAiVmlkZW8gZXN0w6EgcHJvbnRvISIpIHsKICAgICAgICAgICAgICB2YXIgdmlkID0gewogICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICAgICAgdmlkZW9TdGF0dXM6ICJyZWFkeSIKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJlYWR5ID0gcmVhZHkgKyAxOwoKICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goImZldGNoVmlkZW9TdGF0dXMiLCB2aWQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5tZXNzYWdlID09ICJVcGxvYWQgZG8gdmlkZW8gRmFsaG91ISIpIHsKICAgICAgICAgICAgICB2YXIgX3ZpZCA9IHsKICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgICAgIHZpZGVvU3RhdHVzOiAiZmFpbGVkIgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmVhZHkgPSByZWFkeSArIDE7CgogICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgiZmV0Y2hWaWRlb1N0YXR1cyIsIF92aWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVhZHkgPT0gdmlkZW9MZW5ndGgpIHsKICAgICAgICAgICAgICBfdGhpcy5yZWFkeSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChpbmRleCArIDEgPT0gdmlkZW9MZW5ndGgpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudmVyaWZpY2F0aW9uKTsKCiAgICAgICAgICBfdGhpcy52ZXJpZmljYXRpb25PZlN0YXR1cygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdmVyaWZpY2F0aW9uT2ZTdGF0dXM6IGZ1bmN0aW9uIHZlcmlmaWNhdGlvbk9mU3RhdHVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMudmVyaWZpY2F0aW9uID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpczIucmVhZHkgPT0gdHJ1ZSkgewogICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh2ZXJpZmljYXRpb24pCiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIudmVyaWZpY2F0aW9uKTsKICAgICAgICAgIF90aGlzMi5yZWFkeSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuY2hlY2tTdGF0dXMoKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDAwKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnZlcmlmaWNhdGlvbk9mU3RhdHVzKCk7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldHZpZGVvTmFtZSk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy52ZXJpZmljYXRpb24pOwogIH0KfTs="},{"version":3,"sources":["uploadBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"box\">\n    <v-card width=\"500\">\n      <v-toolbar color=\"indigo\" dark>\n        <v-toolbar-title>Uploads</v-toolbar-title>\n        <v-spacer> </v-spacer>\n        <v-icon color=\"black\" @click=\"boxToogle()\">\n          mdi-close\n        </v-icon>\n      </v-toolbar>\n      <v-spacer></v-spacer>\n\n      <v-list-item-group\n        v-for=\"(video, i) in $store.getters.getvideoName\"\n        :key=\"i\"\n      >\n        <v-list-item>\n          <v-card-text\n            class=\"mx-auto text-center\"\n            v-if=\"video.videoName\"\n            :key=\"'j' + i\"\n            v-text=\"video.videoName\"\n          >\n          </v-card-text>\n\n          <div id=\"progress\">\n            <v-container v-if=\"video.videoStatus == 'uploading'\">\n              <v-progress-circular\n                indeterminate\n                color=\"primary\"\n              ></v-progress-circular>\n            </v-container>\n            <v-icon v-if=\"video.videoStatus == 'ready'\" color=\"green\" large>\n              mdi-check-bold\n            </v-icon>\n            <v-icon v-if=\"video.videoStatus == 'failed'\" color=\"red\" large>\n              mdi-close-bold\n            </v-icon>\n          </div>\n        </v-list-item>\n        <v-divider> </v-divider>\n      </v-list-item-group>\n    </v-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      ready: false,\n      verification: null,\n    }\n  },\n  methods: {\n    boxToogle() {\n      this.$store.dispatch(\"fetchuploadBoxContoller\", false)\n      this.$store.dispatch(\"clearVideo\")\n    },\n    checkStatus() {\n      let videoLength = this.$store.getters.getvideoName.length\n      let ready = 0\n\n      this.$store.getters.getvideoName.forEach((video, index) => {\n        console.log(\"video\", video)\n        if (video.videoStatus == \"uploading\") {\n          fetch(\"http://localhost:2006/video-vimeo-status\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              videoname: video.videoName,\n            }),\n          })\n            .then((response) => {\n              return response.json()\n            })\n            .then((res) => {\n              console.log(\"Response:\", res)\n              if (res.message == \"Video estÃ¡ pronto!\") {\n                let vid = {\n                  index: index,\n                  videoStatus: \"ready\",\n                }\n                ready = ready + 1\n                this.$store.dispatch(\"fetchVideoStatus\", vid)\n              } else if (res.message == \"Upload do video Falhou!\") {\n                let vid = {\n                  index: index,\n                  videoStatus: \"failed\",\n                }\n                ready = ready + 1\n                this.$store.dispatch(\"fetchVideoStatus\", vid)\n              }\n              if (ready == videoLength) {\n                this.ready = true\n              }\n            })\n            .catch((error) => {\n              console.log(error)\n            })\n        }\n        if (index + 1 == videoLength) {\n          clearInterval(this.verification)\n          this.verificationOfStatus()\n        }\n      })\n    },\n\n    verificationOfStatus() {\n      this.verification = setInterval(() => {\n        if (this.ready == true) {\n          // clearInterval(verification)\n          console.log(this.verification)\n          this.ready = false\n        } else {\n          this.checkStatus()\n        }\n      }, 10000)\n    },\n  },\n\n  mounted() {\n    this.verificationOfStatus()\n    console.log(this.$store.getters.getvideoName)\n  },\n\n  destroyed() {\n    clearInterval(this.verification)\n  },\n}\n</script>\n\n<style>\n#box {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n#progress {\n  right: 0;\n}\n</style>\n"],"sourceRoot":"src/components"}]}